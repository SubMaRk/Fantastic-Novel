<!DOCTYPE html>
<html lang="th" dir="ltr" id="index">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="utf-8">
  <meta http-equiv="Pragma" content="no-cache">
  <title>เข้าสู่ระบบ ~ {网站名}</title>
  <meta name="keywords" content="เข้าสู่ระบบ">
  <meta name="description" content="เข้าสู่ระบบเพื่อใช้งานเว็บไซต์ TH-SHARING">
  <!-- OG META TAGS -->
  <meta property="og.title" content="เข้าสู่ระบบ ~ {网站名}">
  <meta property="og.description" content="เข้าสู่ระบบเพื่อใช้งานเว็บไซต์ TH-SHARING">
  <meta property="og.type" content="website">
  <meta property="og.url" content="{当前url}/module/user/login.php">
  <meta property="og.image" content="{logo}">
  <meta property="fb:pages" content="268246090218455">
  <!-- Other META TAGS -->
  <meta name="renderer" content="webkit|ie-comp|ie-stand">
  <meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Global JS -->
  <!--<script src="{templates}/static/js/materialize.min.js"></script>-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
  <script src="https://cdn.rawgit.com/alertifyjs/alertify.js/v1.0.10/dist/js/alertify.js"></script>
  <!-- Global Styles -->
  <!--<link rel="stylesheet" href="{templates}/static/css/materialize.min.css">-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="{templates}/static/css/alertify.css">
  <!--<link rel="stylesheet" href="{templates}/static/css/viewport.css">-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <!-- Other JS/CSS -->
  <script>
    window.onerror = function() {
      return true;
    }
  </script>
</head>
<body>
<link rel="stylesheet" href="{templates}/static/css/user.login.css">
  <section id="login_page">
    <div class="container" id="login_width">
      <div class="row" id="no_mgb">
        <div id="login_form">
          <form class="col s12" id="login_style" name="login_form">
            <div class="row" id="no_mgb">
              <div class="user_nolog">
                <i class="material-icons zoom-center">account_box</i>
                <p class="login_text">
                  โปรดเข้าสู่ระบบด้วยบัญชีของคุณ
                </p>
              </div>
			  {表单锁}
              <div class="input-field col s12">
                <i class="material-icons prefix">account_circle</i>
                <input id="user_name" type="text" class="viladate" name="name" />
                <label for="user_name">ชื่อผู้ใช้</label>
              </div>
              <div class="input-field col s12">
                <i class="material-icons prefix">lock</i>
                <input id="user_password" type="password" class="validate" name="psw" />
                <label for="user_password">รหัสผ่าน</label>
              </div>
              <div class="input-field col s12">
                <i class="material-icons prefix">fingerprint</i> {登录验证码开启}
                <input id="code" type="text" name="code" style="width:70%" />{登录验证码}{/登录验证码开启}
                <label for="cpde">โค้ดยืนยัน</label>
              </div>
              <div class="input-field col s12 center">
                <input type="hidden" name="time" value="2592000" />
                <input type="hidden" name="remember" value="1" />
                <button class="waves-effect waves-light btn" value="true" type="submit" id="login" name="submit">เข้าสู่ระบบ</button>
                <p class="message">
                  ยังไม่มีบัญชีใช่ไหม? <a href="javascript:easydialog_url('user.reg','ลงทะเบียน','',390,500)">ลงทะเบียนเลย!</a><br /> หรือ <a href="{找回密码}">ลืมรหัสผ่าน?</a>
                </p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <div class="alertify-logs bottom right"></div>
</body>
</html>

<script src="/files/js/common.js"></script>
<script>
$(function(){
	//登录
	$("#login").click(function(){
		var name=$("#login_form [name=name]").val();
		var psw=$("#login_form [name=psw]").val();
		var loginInfo;
		if(name.length>16 || name.length<5){
			//easydialog_alert('对不起，账号长度只能为5-16个字符！','','','');
			alertify.error("ขออภัย! ชื่อผู้ใช้ต้องมีความยาว 3-16 ตัวอักษร");
			return false;
		}else if(psw.length>16 || psw.length<5){
			//easydialog_alert('对不起，密码长度只能为5-16个字符！','','','');
			alertify.error("ขออภัย! รหัสผ่านต้องมีความยาว 6-16 ตัวอักษร");
			return false;
		}else if( $("#login_form [name=code]") && $("#login_form [name=code]").val() == ''){
			//easydialog_alert('对不起，请输入验证码！','','','');
			alertify.error("ขออภัย! โค้ดยืนยันไม่ถูกต้อง");
			return false;
		}else{
			easydialog_loading();
			$.ajax({
				type:"POST",
				url:"{登录提交地址}&ajax=yes",
				data:$("[name=login_form]").serializeArray(),
				dataType:"json",
				success:function(data){
					if( data.code != 200 ){
						easydialog_alert(data.msg,'','','');
					}else{
						if( '{登录后操作}' == 'ref'){
							loginInfo = 'เข้าสู่ระบบแล้ว! กำลังจะเปลี่ยนไปหน้าหลักใน 2 วินาที';
						}else if( '{登录后操作}' == 'jump'){
							loginInfo = 'เข้าสู่ระบบแล้ว! กำลังจะเปลี่ยนไปหน้าข้อมูลส่วนตัวใน 2 วินาที';
						}
						easydialog_autoclose(loginInfo,'success');
						if( self!=top ){
							if( '{登录后操作}' == 'ref'){
								setTimeout(function(){window.parent.location.reload();},1500);
							}else if( '{登录后操作}' == 'jump'){
								setTimeout(function(){window.parent.location = '{用户中心}';},1500);
							}
						}else{
							if( '{登录后操作}' == 'ref'){
								setTimeout(function(){window.location.reload();},1500);
							}else if( '{登录后操作}' == 'jump'){
								setTimeout(function(){window.location= '{用户中心}';},1500);
							}
						}
					}
				},
				async:true,
			}); 
			return false; 
		}
	})
})
</script>